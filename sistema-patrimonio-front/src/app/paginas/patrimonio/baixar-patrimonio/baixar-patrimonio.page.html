<app-navbar></app-navbar>

<ion-content [fullscreen]="true">
  <app-layout [pagina]="'Baixar Patrimônio'">
    <app-forms>
      <form #form="ngForm" [formGroup]="baixaForm" *ngIf="baixaForm" (ngSubmit)="submit()" class="formulario">
        <div>
          <ion-grid>
            <div class="sessao">
              <p>Dados do Patrimônio a ser Baixado</p>
            </div>

            <ion-row>
              <ion-col>
                <div class="patrimonio">
                  <p><span>Plaqueta</span></p>
                  <p>{{plaqueta}}</p>
                </div>
              </ion-col>
              
              <ion-col>
                <div class="patrimonio">
                  <p><span>Descrição</span></p>
                  <p>{{descricao}}</p>
                </div>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <ion-textarea fill="outline" label="Motivo" labelPlacement="floating" formControlName="motivo"
                  type="text" placeholder="Motivo da baixa do patrimônio"></ion-textarea>
                <small class="error-message" *ngIf="baixaForm.get('motivo')?.errors && form.submitted">
                  Informe o motivo da baixa
                </small>
              </ion-col>
            </ion-row>

            <div class="sessao">
              <p>Dados do profissional que autoriza a baixa</p>
            </div>

            <ion-row>
              <ion-col>
                <ion-input fill="outline" label="Nome" labelPlacement="floating" formControlName="nomeProfissionalBaixa"
                  type="text" (focusout)="formataNome()" [(ngModel)]="nomeFormatado"></ion-input>
                <small class="error-message" *ngIf="baixaForm.get('nomeProfissionalBaixa')?.errors && form.submitted">
                  Informe o nome completo do profissional
                </small>
              </ion-col>
            </ion-row>

            <ion-row>
              <ion-col>
                <ion-input fill="outline" label="CPF" labelPlacement="floating" formControlName="cpfProfissionalBaixa"
                  type="numeric" (focusout)="validaCPF()" [(ngModel)]="cpfFormatado"></ion-input>
                <small class="error-message" *ngIf="baixaForm.get('cpfProfissionalBaixa')?.errors && form.submitted">
                  Informe o CPF do profissional
                </small>
              </ion-col>
            </ion-row>

          </ion-grid>
        </div>

        <div class="botoes">
          <ion-button expand="block" type="submit">SALVAR E GERAR TERMO</ion-button>
          <ion-button expand="block" (click)="cancelarBaixa()">CANCELAR E VOLTAR A LISTA</ion-button>
        </div>
      </form>
    </app-forms>
  </app-layout>
</ion-content>